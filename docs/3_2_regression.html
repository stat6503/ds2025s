<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>regression – R&amp;E 활동</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-2f6844b3748638c5738d4cf93630e566.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R&amp;E 활동</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-python-basic" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Python Basic</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-python-basic">    
        <li>
    <a class="dropdown-item" href="./1_1_environment.html">
 <span class="dropdown-text">(1) Python 개발 환경</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_2_basic.html">
 <span class="dropdown-text">(2) 기초 문법</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-exploration" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Exploration</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-exploration">    
        <li>
    <a class="dropdown-item" href="./2_1_numpy.html">
 <span class="dropdown-text">(1) NumPy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_2_pandas.html">
 <span class="dropdown-text">(2) Pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_3_matplotlib.html">
 <span class="dropdown-text">(3) Matplotlib</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_4_seaborn.html">
 <span class="dropdown-text">(4) Seaborn</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-machine-learning" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Machine Learning</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-machine-learning">    
        <li>
    <a class="dropdown-item" href="./3_2_regression.html">
 <span class="dropdown-text">(1) 지도학습：회귀</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./3_3_classification.html">
 <span class="dropdown-text">(2) 지도학습：분류</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#상관분석" id="toc-상관분석" class="nav-link active" data-scroll-target="#상관분석">8.1. 상관분석</a></li>
  <li><a href="#회귀분석" id="toc-회귀분석" class="nav-link" data-scroll-target="#회귀분석">8.2. 회귀분석</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<h1>
<ol start="8" type="1">
<li>지도학습 : 회귀
</li></ol></h1>

<section id="상관분석" class="level2">
<h2 class="anchored" data-anchor-id="상관분석">8.1. 상관분석</h2>
<ul>
<li>상관관계(correlation)
<ul>
<li>두 수치형 변수 간 선형적 관계(linear ralationship)를 의미함</li>
<li>산점도나 상관계수를 통해 확인할 수 있음</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>상관계수(correlation coefficient)
<ul>
<li>두 변수 간 선형적 관계의 강도와 방향을 수치로 나타낸 통계량</li>
<li>상관계수는 -1에서 1 사이의 값을 가짐
<ul>
<li>절대값이 1에 가까울 수록 강한 상관관계, 0에 가까울수록 약한 상관관계를 가짐</li>
<li>양수이면 양의 상관관계, 음수이면 음의 상관관계를 가짐</li>
</ul></li>
</ul></li>
</ul>
<p><img src="./images/fig3-6.jpg" class="img-fluid" style="width:70.0%"></p>
<p><br></p>
<ul>
<li>[데이터] 캐글에서 제공하는 전세계 행복지수 데이터
<ul>
<li>평가지표 : 1인당 GDP, 사회적 지지 정도, 건강한 기대수명, 인생 선택의 자유, 기부</li>
<li>[실습파일] <a href="./data/2020.csv">2020.csv</a>, <a href="./data/2021.csv">2021.csv</a></li>
</ul></li>
</ul>
<p><br></p>
<div id="b17db541" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 라이브러리 불러오기</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="7a7d54ff" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 불러오기</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df2020 <span class="op">=</span> pd.read_csv(<span class="st">'./data/2020.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df2021 <span class="op">=</span> pd.read_csv(<span class="st">'./data/2021.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="2e4ae4c8" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 열 정보</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df2020.dtypes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>Country name                     object
Happiness score                 float64
upperwhisker                    float64
lowerwhisker                    float64
GDP per capita                  float64
Social support                  float64
Healthy life expectancy         float64
Freedom to make life choices    float64
Generosity                      float64
Dystopia                        float64
dtype: object</code></pre>
</div>
</div>
<div id="c989ae33" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2020년 데이터 확인</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df2020.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Country name</th>
<th data-quarto-table-cell-role="th">Happiness score</th>
<th data-quarto-table-cell-role="th">upperwhisker</th>
<th data-quarto-table-cell-role="th">lowerwhisker</th>
<th data-quarto-table-cell-role="th">GDP per capita</th>
<th data-quarto-table-cell-role="th">Social support</th>
<th data-quarto-table-cell-role="th">Healthy life expectancy</th>
<th data-quarto-table-cell-role="th">Freedom to make life choices</th>
<th data-quarto-table-cell-role="th">Generosity</th>
<th data-quarto-table-cell-role="th">Dystopia</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Rank</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Finland</td>
<td>7.8087</td>
<td>7.869766</td>
<td>7.747634</td>
<td>10.639267</td>
<td>0.954330</td>
<td>71.900825</td>
<td>0.949172</td>
<td>-0.059482</td>
<td>2.762835</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Denmark</td>
<td>7.6456</td>
<td>7.711245</td>
<td>7.579955</td>
<td>10.774001</td>
<td>0.955991</td>
<td>72.402504</td>
<td>0.951444</td>
<td>0.066202</td>
<td>2.432741</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Switzerland</td>
<td>7.5599</td>
<td>7.628528</td>
<td>7.491272</td>
<td>10.979933</td>
<td>0.942847</td>
<td>74.102448</td>
<td>0.921337</td>
<td>0.105911</td>
<td>2.350267</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Iceland</td>
<td>7.5045</td>
<td>7.621347</td>
<td>7.387653</td>
<td>10.772559</td>
<td>0.974670</td>
<td>73.000000</td>
<td>0.948892</td>
<td>0.246944</td>
<td>2.460688</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Norway</td>
<td>7.4880</td>
<td>7.556281</td>
<td>7.419719</td>
<td>11.087804</td>
<td>0.952487</td>
<td>73.200783</td>
<td>0.955750</td>
<td>0.134533</td>
<td>2.168266</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="da1b3876" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2021년 데이터 확인</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>df2021.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Country name</th>
<th data-quarto-table-cell-role="th">Happiness score</th>
<th data-quarto-table-cell-role="th">upperwhisker</th>
<th data-quarto-table-cell-role="th">lowerwhisker</th>
<th data-quarto-table-cell-role="th">GDP per capita</th>
<th data-quarto-table-cell-role="th">Social support</th>
<th data-quarto-table-cell-role="th">Healthy life expectancy</th>
<th data-quarto-table-cell-role="th">Freedom to make life choices</th>
<th data-quarto-table-cell-role="th">Generosity</th>
<th data-quarto-table-cell-role="th">Dystopia</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Rank</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Finland</td>
<td>7.842</td>
<td>7.904</td>
<td>7.780</td>
<td>10.775</td>
<td>0.954</td>
<td>72.0</td>
<td>0.949</td>
<td>-0.098</td>
<td>3.253</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Denmark</td>
<td>7.620</td>
<td>7.687</td>
<td>7.552</td>
<td>10.933</td>
<td>0.954</td>
<td>72.7</td>
<td>0.946</td>
<td>0.030</td>
<td>2.868</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Switzerland</td>
<td>7.571</td>
<td>7.643</td>
<td>7.500</td>
<td>11.117</td>
<td>0.942</td>
<td>74.4</td>
<td>0.919</td>
<td>0.025</td>
<td>2.839</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Iceland</td>
<td>7.554</td>
<td>7.670</td>
<td>7.438</td>
<td>10.878</td>
<td>0.983</td>
<td>73.0</td>
<td>0.955</td>
<td>0.160</td>
<td>2.967</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Netherlands</td>
<td>7.464</td>
<td>7.518</td>
<td>7.410</td>
<td>10.932</td>
<td>0.942</td>
<td>72.4</td>
<td>0.913</td>
<td>0.175</td>
<td>2.798</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="08928916" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 전처리 : 열 삭제</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>df2020.drop([<span class="st">'upperwhisker'</span>, <span class="st">'lowerwhisker'</span>, <span class="st">'Dystopia'</span>], axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>df2021.drop([<span class="st">'upperwhisker'</span>, <span class="st">'lowerwhisker'</span>, <span class="st">'Dystopia'</span>], axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="abc1b7c5" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 열 이름 변경 : 공백을 .으로 대체</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df2020.columns <span class="op">=</span> df2020.columns.<span class="bu">str</span>.replace(<span class="st">' '</span>,<span class="st">'.'</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>df2021.columns <span class="op">=</span> df2021.columns.<span class="bu">str</span>.replace(<span class="st">' '</span>,<span class="st">'.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="843645ba" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">## 행복 지수에 영향을 주는 요인 파악1 : 행복 점수와 기능의 상관관계</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">## 한 국가의 행복지수와 경제적(GDP), 법적 상태(Freedom) 간에 강한 관계가 있는가?</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 전처리</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> df2020.copy()</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>df1.drop([<span class="st">'Social.support'</span>, <span class="st">'Healthy.life.expectancy'</span>, <span class="st">'Generosity'</span>], axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Country.name</th>
<th data-quarto-table-cell-role="th">Happiness.score</th>
<th data-quarto-table-cell-role="th">GDP.per.capita</th>
<th data-quarto-table-cell-role="th">Freedom.to.make.life.choices</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Rank</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Finland</td>
<td>7.8087</td>
<td>10.639267</td>
<td>0.949172</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Denmark</td>
<td>7.6456</td>
<td>10.774001</td>
<td>0.951444</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Switzerland</td>
<td>7.5599</td>
<td>10.979933</td>
<td>0.921337</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Iceland</td>
<td>7.5045</td>
<td>10.772559</td>
<td>0.948892</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Norway</td>
<td>7.4880</td>
<td>11.087804</td>
<td>0.955750</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">149</td>
<td>Central African Republic</td>
<td>3.4759</td>
<td>6.625160</td>
<td>0.640881</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">150</td>
<td>Rwanda</td>
<td>3.3123</td>
<td>7.600104</td>
<td>0.900589</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">151</td>
<td>Zimbabwe</td>
<td>3.2992</td>
<td>7.865712</td>
<td>0.711458</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">152</td>
<td>South Sudan</td>
<td>2.8166</td>
<td>7.425360</td>
<td>0.451314</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">153</td>
<td>Afghanistan</td>
<td>2.5669</td>
<td>7.462861</td>
<td>0.396573</td>
</tr>
</tbody>
</table>

<p>153 rows × 4 columns</p>
</div>
</div>
</div>
<div id="41654e2e" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df1.dtypes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>Country.name                     object
Happiness.score                 float64
GDP.per.capita                  float64
Freedom.to.make.life.choices    float64
dtype: object</code></pre>
</div>
</div>
<div id="24113d5c" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 상관계수 계산 : 2020년 데이터</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> df1.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>).corr()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>corr[<span class="st">'Happiness.score'</span>].sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>Happiness.score                 1.000000
GDP.per.capita                  0.775374
Freedom.to.make.life.choices    0.590597
Name: Happiness.score, dtype: float64</code></pre>
</div>
</div>
<div id="4645eafd" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 히트맵 : 2020년 데이터</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>sns.heatmap(corr, annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'Blues'</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-12-output-1.png" width="779" height="416" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="91cd3209" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 전처리</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df2021.copy()</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>df2.drop([<span class="st">'Social.support'</span>, <span class="st">'Healthy.life.expectancy'</span>, <span class="st">'Generosity'</span>], axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Country.name</th>
<th data-quarto-table-cell-role="th">Happiness.score</th>
<th data-quarto-table-cell-role="th">GDP.per.capita</th>
<th data-quarto-table-cell-role="th">Freedom.to.make.life.choices</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Rank</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Finland</td>
<td>7.842</td>
<td>10.775</td>
<td>0.949</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Denmark</td>
<td>7.620</td>
<td>10.933</td>
<td>0.946</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Switzerland</td>
<td>7.571</td>
<td>11.117</td>
<td>0.919</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Iceland</td>
<td>7.554</td>
<td>10.878</td>
<td>0.955</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Netherlands</td>
<td>7.464</td>
<td>10.932</td>
<td>0.913</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">145</td>
<td>Lesotho</td>
<td>3.512</td>
<td>7.926</td>
<td>0.715</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">146</td>
<td>Botswana</td>
<td>3.467</td>
<td>9.782</td>
<td>0.824</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">147</td>
<td>Rwanda</td>
<td>3.415</td>
<td>7.676</td>
<td>0.897</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">148</td>
<td>Zimbabwe</td>
<td>3.145</td>
<td>7.943</td>
<td>0.677</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">149</td>
<td>Afghanistan</td>
<td>2.523</td>
<td>7.695</td>
<td>0.382</td>
</tr>
</tbody>
</table>

<p>149 rows × 4 columns</p>
</div>
</div>
</div>
<div id="392620f8" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 히트맵 : 2021년 데이터</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>sns.heatmap(df2.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>).corr(), annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'PuBuGn'</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-14-output-1.png" width="779" height="416" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<ul>
<li>분석 결과
<ul>
<li>위에 표시된 2개의 히트맵은 2020년, 2021년 각각에 해당하는 3개 열, 점수, GDP, 자유 상관관 관계 매트릭스를 표시함</li>
</ul>
<ol type="1">
<li>GDP는 행복지수와 어떤 관련이 있는가?
<ul>
<li>히트맵에서 GDP.per.capita와 Score 간의 상관 계수는 총 2년 동안 ~ 0.79로 GDP에 대한 시민의 만족도와 행복도 점수 사이에 강한 양의 관계가 있음을 나타냅니다. GDP.per.capita는 한 국가의 경제 성장을 추적하는 지표입니다. 긍정적인 경제 성장률을 보이는 국가의 사람들은 더 높은 소득과 더 나은 생활 수준으로 이어지기 때문에 더 행복해지는 경향이 있습니다. 따라서 우리는 만족을 보장하기 위해 한 국가의 GDP가 최우선 순위 중 하나가 되어야 한다고 결론지었습니다.</li>
</ul></li>
<li>행복 점수와 자유의 관계는?
<ul>
<li>자유와 점수 사이의 상관 계수는 2년 전체에서 ~ 0.61로 자유에 대한 인식과 국가의 행복 지수 사이에 중간 정도의 양의 관계를 나타냅니다. 자유에 대한 이러한 인식을 일반화하는 것은 연구에 따르면 세계의 다른 지역에 속한 사람들마다 다르기 때문에 어려운 작업입니다. 그럼에도 불구하고 여전히 국가의 행복지수에 중요한 기여를 합니다.</li>
</ul></li>
</ol></li>
</ul>
<p><br></p>
<div id="2f57fa34" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">## 행복 지수에 영향을 주는 요인 파악2 : 행복 점수와 사회적 상태의 상관관계</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">## 한 국가의 사회적 상태에 대한 인식은 행복 지수에 어떤 영향을 미치는가?</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 전처리</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>x1 <span class="op">=</span> df2020[[<span class="st">'Generosity'</span>, <span class="st">'Social.support'</span>, <span class="st">'Happiness.score'</span>]].copy()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>x2 <span class="op">=</span> df2021[[<span class="st">'Generosity'</span>, <span class="st">'Social.support'</span>, <span class="st">'Happiness.score'</span>]].copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="891af0d9" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 히트맵 : 2020년 데이터</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>a1 <span class="op">=</span> x1.corr()</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>sns.heatmap(a1, annot<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-16-output-1.png" width="597" height="416" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="36c4451b" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 히트맵 : 2021년 데이터</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>a2 <span class="op">=</span> x2.corr()</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>sns.heatmap(a2, annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">'GnBu'</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-17-output-1.png" width="597" height="416" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<ul>
<li>분석 결과
<ul>
<li>관대함과 사회적 지지는 행복 점수와 어떤 관련이 있는가?
<ul>
<li>관대함과 사회적 지지 상관 계수는 -0.057, -0.11으로 관찰되어 매우 약한 음의 관계를 나타냅니다. 두 메트릭 간에 선형 변화가 많이 관찰되지 않습니다. 관대함은 시민들이 서로에게서 얻는 인식입니다. 관대함과 점수 상관계수는 0.069, -0.018으로 관찰되어 매우 약한 음의 관계를 나타낸다.</li>
<li>한편, 사회적 지지와 점수의 상관값은 0.77, 0.76로 강한 양의 관계를 나타낸다. 사회적 지지는 사람들이 가족, 친구, 지인 등과 함께 얼마나 행복한지에 대한 인식입니다. 이들은 일상생활에서 거의 모든 사람들이 대하는 사람들이기 때문에 사회적 지지에 대한 인식이 행복지수를 결정하는 중요한 요소라고 볼 수 있다.</li>
</ul></li>
</ul></li>
</ul>
<p><br></p>
<div id="2abd1821" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 전체 상관계수 : 2020년 데이터</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> df2020.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>).corr()</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>upp_mat <span class="op">=</span> np.triu(corr)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>sns.heatmap(corr, mask<span class="op">=</span>upp_mat,vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>, annot<span class="op">=</span><span class="va">True</span>, cmap <span class="op">=</span><span class="st">'RdYlBu_r'</span>, linewidths<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-18-output-1.png" width="798" height="550" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="6dce29d3" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 전체 상관계수 : 2021년 데이터</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 행복도에 가장 큰 영향을 주는 것은 경제적 여유, 사회적 지지, 기대수명(건간), 자유도 순인 것을 알 수 있었다.</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> df2021.select_dtypes(include<span class="op">=</span><span class="st">'number'</span>).corr()</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>upp_mat <span class="op">=</span> np.triu(corr)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>sns.heatmap(corr, mask<span class="op">=</span>upp_mat, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>,annot <span class="op">=</span> <span class="va">True</span>, cmap <span class="op">=</span><span class="st">'PiYG'</span>, linewidths<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-19-output-1.png" width="798" height="550" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="55d545ec" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">## 상위 50위 국가의 기대수명과 GDP 간 관계</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 전처리</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>top50 <span class="op">=</span> df2021.head(<span class="dv">50</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>top50.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Country.name</th>
<th data-quarto-table-cell-role="th">Happiness.score</th>
<th data-quarto-table-cell-role="th">GDP.per.capita</th>
<th data-quarto-table-cell-role="th">Social.support</th>
<th data-quarto-table-cell-role="th">Healthy.life.expectancy</th>
<th data-quarto-table-cell-role="th">Freedom.to.make.life.choices</th>
<th data-quarto-table-cell-role="th">Generosity</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Rank</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Finland</td>
<td>7.842</td>
<td>10.775</td>
<td>0.954</td>
<td>72.0</td>
<td>0.949</td>
<td>-0.098</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Denmark</td>
<td>7.620</td>
<td>10.933</td>
<td>0.954</td>
<td>72.7</td>
<td>0.946</td>
<td>0.030</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Switzerland</td>
<td>7.571</td>
<td>11.117</td>
<td>0.942</td>
<td>74.4</td>
<td>0.919</td>
<td>0.025</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Iceland</td>
<td>7.554</td>
<td>10.878</td>
<td>0.983</td>
<td>73.0</td>
<td>0.955</td>
<td>0.160</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Netherlands</td>
<td>7.464</td>
<td>10.932</td>
<td>0.942</td>
<td>72.4</td>
<td>0.913</td>
<td>0.175</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="18086fe3" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 산점도</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>sns.set_theme(style<span class="op">=</span><span class="st">'dark'</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">25</span>, <span class="dv">7</span>))</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.scatterplot(data<span class="op">=</span>top50, x<span class="op">=</span><span class="st">'Country.name'</span>, y<span class="op">=</span><span class="st">'Healthy.life.expectancy'</span>, size<span class="op">=</span><span class="st">'GDP.per.capita'</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                     sizes<span class="op">=</span>(<span class="dv">400</span>, <span class="dv">1500</span>), hue<span class="op">=</span><span class="st">'GDP.per.capita'</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">90</span>, fontsize<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">'midnightblue'</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>plt.yticks(fontsize<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">'midnightblue'</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Country'</span>, size<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">'midnightblue'</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Healthy Life Expectancy'</span>, size<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">'midnightblue'</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-21-output-1.png" width="1938" height="799" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="47b727bd" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 우리나라는 앞의 3가지가 각각 몇 위일까?</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>economy <span class="op">=</span> df2020.loc[:,[<span class="st">'Country.name'</span>,<span class="st">'GDP.per.capita'</span>]]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>economy <span class="op">=</span> economy.groupby(economy[<span class="st">'Country.name'</span>])[<span class="st">'GDP.per.capita'</span>].mean().sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>economy <span class="op">=</span> economy.rank(method<span class="op">=</span><span class="st">'min'</span>,ascending<span class="op">=</span><span class="va">False</span>)[<span class="st">'South Korea'</span>]</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>social <span class="op">=</span> df2020.loc[:,[<span class="st">'Country.name'</span>,<span class="st">'Social.support'</span>]]</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>social <span class="op">=</span> social.groupby(social[<span class="st">'Country.name'</span>])[<span class="st">'Social.support'</span>].mean().sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>social <span class="op">=</span> social.rank(method<span class="op">=</span><span class="st">'min'</span>,ascending<span class="op">=</span><span class="va">False</span>)[<span class="st">'South Korea'</span>]</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>health <span class="op">=</span> df2020.loc[:,[<span class="st">'Country.name'</span>,<span class="st">'Healthy.life.expectancy'</span>]]</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>health <span class="op">=</span> health.groupby(health[<span class="st">'Country.name'</span>])[<span class="st">'Healthy.life.expectancy'</span>].mean().sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>health <span class="op">=</span> health.rank(method<span class="op">=</span><span class="st">'min'</span>,ascending<span class="op">=</span><span class="va">False</span>)[<span class="st">'South Korea'</span>]</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>free <span class="op">=</span> df2020.loc[:,[<span class="st">'Country.name'</span>,<span class="st">'Freedom.to.make.life.choices'</span>]]</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>free<span class="op">=</span> free.groupby(free[<span class="st">'Country.name'</span>])[<span class="st">'Freedom.to.make.life.choices'</span>].mean().sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>free <span class="op">=</span> free.rank(method<span class="op">=</span><span class="st">'min'</span>,ascending<span class="op">=</span><span class="va">False</span>)[<span class="st">'South Korea'</span>]</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'153개국 중 대한민국의 </span><span class="ch">\n</span><span class="ss">GDP 순위:</span><span class="sc">{</span>economy<span class="sc">.</span>astype(<span class="bu">int</span>)<span class="sc">}</span><span class="ss">위</span><span class="ch">\n</span><span class="ss">사회적 지위 순위:</span><span class="sc">{</span>social<span class="sc">.</span>astype(<span class="bu">int</span>)<span class="sc">}</span><span class="ss">위</span><span class="ch">\n</span><span class="ss">기대수명 순위:</span><span class="sc">{</span>health<span class="sc">.</span>astype(<span class="bu">int</span>)<span class="sc">}</span><span class="ss">위</span><span class="ch">\n</span><span class="ss">자유도 순위:</span><span class="sc">{</span>free<span class="sc">.</span>astype(<span class="bu">int</span>)<span class="sc">}</span><span class="ss">위'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>153개국 중 대한민국의 
GDP 순위:27위
사회적 지위 순위:99위
기대수명 순위:10위
자유도 순위:140위</code></pre>
</div>
</div>
<p><br></p>
<ul>
<li>분석 결과
<ul>
<li>GDP 순위는 양호, 기대수명은 굉장히 높다. 다른나라보다 국가 복지 수준이 높은 덕에 높은 순위를 차지한 것 같다.</li>
<li>사회적 지위 순위도 하위 수준이었다.</li>
<li>자유도는 거의 최하위 수준이였다. 자유도의 정의는 무엇일까. 정치적으로 문제가 있으면 자유롭게 시위도하고, 표현의 자유, 언론의 자유, 알권리 모두 상위라고 생각하는데 이렇게 최 하위 수준이 나온 이유는 무엇일까. 행복도가 높은 유럽지역처럼 길거리에서 느껴지는 여유로움이 자유도의 큰 부분을 차지하는 것일까?</li>
</ul></li>
</ul>
<p><br></p>
<div id="7737d640" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 산점도 행렬 : 상관관계 확인</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>sns.pairplot(df2020)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-23-output-1.png" width="1414" height="1414" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="회귀분석" class="level2">
<h2 class="anchored" data-anchor-id="회귀분석">8.2. 회귀분석</h2>
<div id="cada1e28" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 한글 깨짐 현상에 대한 해결 방법</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib <span class="im">as</span> mpl</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>plt.rc(<span class="st">'font'</span>, family<span class="op">=</span><span class="st">'Malgun Gothic'</span>)  <span class="co"># 또는 '맑은 고딕'</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>mpl.rcParams[<span class="st">'axes.unicode_minus'</span>] <span class="op">=</span> <span class="va">False</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="da87ce72" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># scikit-learn 설치하기</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#!pip install scikit-learn</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="02d3cd8e" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 공부시간 : 독립변수, 시험점수 : 종속변수</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [[<span class="dv">2</span>],[<span class="dv">4</span>],[<span class="dv">6</span>],[<span class="dv">8</span>],[<span class="dv">10</span>]]       <span class="co"># 공부시간</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> [[<span class="dv">81</span>],[<span class="dv">93</span>],[<span class="dv">90</span>],[<span class="dv">97</span>],[<span class="dv">100</span>]]  <span class="co"># 시험점수</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 산점도 그래프</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,y)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 학습시키기</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LinearRegression()      <span class="co"># 선형회귀분석 객체 생성하기</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 선형회귀분석 객체를 이용하여 학습시키기</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>model.fit(x,y)</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 예측하기</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> model.predict([[<span class="dv">7</span>]])   <span class="co"># 7시간 학습</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'예상점수:</span><span class="sc">{</span>result<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-26-output-1.png" width="588" height="416" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>예상점수:[[94.3]]</code></pre>
</div>
</div>
<p><br></p>
<section id="단순선형-회귀분석" class="level3">
<h3 class="anchored" data-anchor-id="단순선형-회귀분석">8.2.1. 단순선형 회귀분석</h3>
<p><br></p>
<div id="6121cb8e" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 불러오기</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>seoul <span class="op">=</span> pd.read_csv(<span class="st">'./data/(2010-2020) weather.csv'</span>, encoding<span class="op">=</span><span class="st">'cp949'</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>seoul.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">날짜</th>
<th data-quarto-table-cell-role="th">지점</th>
<th data-quarto-table-cell-role="th">평균기온(℃)</th>
<th data-quarto-table-cell-role="th">최저기온(℃)</th>
<th data-quarto-table-cell-role="th">최고기온(℃)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2010-01-01</td>
<td>108</td>
<td>-7.6</td>
<td>-12.7</td>
<td>-3.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2010-01-02</td>
<td>108</td>
<td>-3.6</td>
<td>-7.4</td>
<td>0.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2010-01-03</td>
<td>108</td>
<td>-6.8</td>
<td>-10.5</td>
<td>-3.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2010-01-04</td>
<td>108</td>
<td>-5.9</td>
<td>-8.0</td>
<td>-3.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2010-01-05</td>
<td>108</td>
<td>-9.9</td>
<td>-12.3</td>
<td>-7.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="4ef6859b" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>seoul.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 4018 entries, 0 to 4017
Data columns (total 5 columns):
 #   Column   Non-Null Count  Dtype  
---  ------   --------------  -----  
 0   날짜       4018 non-null   object 
 1   지점       4018 non-null   int64  
 2   평균기온(℃)  4018 non-null   float64
 3   최저기온(℃)  4018 non-null   float64
 4   최고기온(℃)  4017 non-null   float64
dtypes: float64(3), int64(1), object(1)
memory usage: 157.1+ KB</code></pre>
</div>
</div>
<div id="b3eebc42" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>seoul.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">지점</th>
<th data-quarto-table-cell-role="th">평균기온(℃)</th>
<th data-quarto-table-cell-role="th">최저기온(℃)</th>
<th data-quarto-table-cell-role="th">최고기온(℃)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>4018.0</td>
<td>4018.000000</td>
<td>4018.000000</td>
<td>4017.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>108.0</td>
<td>12.965207</td>
<td>8.991015</td>
<td>17.699627</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>0.0</td>
<td>10.803691</td>
<td>10.932678</td>
<td>10.976719</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>108.0</td>
<td>-14.800000</td>
<td>-18.000000</td>
<td>-10.700000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>108.0</td>
<td>3.700000</td>
<td>-0.300000</td>
<td>8.200000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>108.0</td>
<td>14.250000</td>
<td>9.800000</td>
<td>19.600000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>108.0</td>
<td>22.800000</td>
<td>18.900000</td>
<td>27.400000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>108.0</td>
<td>33.700000</td>
<td>30.300000</td>
<td>39.600000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="e22e226c" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 지점 변수 삭제</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>seoul.drop(<span class="st">'지점'</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>seoul.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">날짜</th>
<th data-quarto-table-cell-role="th">평균기온(℃)</th>
<th data-quarto-table-cell-role="th">최저기온(℃)</th>
<th data-quarto-table-cell-role="th">최고기온(℃)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2010-01-01</td>
<td>-7.6</td>
<td>-12.7</td>
<td>-3.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2010-01-02</td>
<td>-3.6</td>
<td>-7.4</td>
<td>0.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2010-01-03</td>
<td>-6.8</td>
<td>-10.5</td>
<td>-3.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2010-01-04</td>
<td>-5.9</td>
<td>-8.0</td>
<td>-3.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2010-01-05</td>
<td>-9.9</td>
<td>-12.3</td>
<td>-7.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="2d6c4ca4" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>seoul.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">날짜</th>
<th data-quarto-table-cell-role="th">평균기온(℃)</th>
<th data-quarto-table-cell-role="th">최저기온(℃)</th>
<th data-quarto-table-cell-role="th">최고기온(℃)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2010-01-01</td>
<td>-7.6</td>
<td>-12.7</td>
<td>-3.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2010-01-02</td>
<td>-3.6</td>
<td>-7.4</td>
<td>0.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2010-01-03</td>
<td>-6.8</td>
<td>-10.5</td>
<td>-3.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2010-01-04</td>
<td>-5.9</td>
<td>-8.0</td>
<td>-3.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2010-01-05</td>
<td>-9.9</td>
<td>-12.3</td>
<td>-7.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="15ef84e3" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 열 이름 변경</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>seoul.columns <span class="op">=</span> [<span class="st">'날짜'</span>, <span class="st">'평균기온'</span>, <span class="st">'최저기온'</span>, <span class="st">'최고기온'</span>]</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>seoul.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>Index(['날짜', '평균기온', '최저기온', '최고기온'], dtype='object')</code></pre>
</div>
</div>
<div id="cb2d2676" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>seoul.isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>날짜      0
평균기온    0
최저기온    0
최고기온    1
dtype: int64</code></pre>
</div>
</div>
<div id="182353f9" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 결측값을 포함하는 행 삭제</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>seoul.dropna(subset<span class="op">=</span>[<span class="st">'최고기온'</span>], axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="8c796459" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>seoul.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 4017 entries, 0 to 4017
Data columns (total 4 columns):
 #   Column  Non-Null Count  Dtype  
---  ------  --------------  -----  
 0   날짜      4017 non-null   object 
 1   평균기온    4017 non-null   float64
 2   최저기온    4017 non-null   float64
 3   최고기온    4017 non-null   float64
dtypes: float64(3), object(1)
memory usage: 156.9+ KB</code></pre>
</div>
</div>
<div id="bf5347d2" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>seoul[<span class="st">'날짜'</span>] <span class="op">=</span> pd.to_datetime(seoul[<span class="st">'날짜'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="5244ef94" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 열 추가</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>seoul[<span class="st">'연도'</span>] <span class="op">=</span> seoul[<span class="st">'날짜'</span>].dt.year</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>seoul[<span class="st">'월'</span>]<span class="op">=</span>seoul[<span class="st">'날짜'</span>].dt.month</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>seoul[<span class="st">'일'</span>]<span class="op">=</span>seoul[<span class="st">'날짜'</span>].dt.day</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>seoul.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">날짜</th>
<th data-quarto-table-cell-role="th">평균기온</th>
<th data-quarto-table-cell-role="th">최저기온</th>
<th data-quarto-table-cell-role="th">최고기온</th>
<th data-quarto-table-cell-role="th">연도</th>
<th data-quarto-table-cell-role="th">월</th>
<th data-quarto-table-cell-role="th">일</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2010-01-01</td>
<td>-7.6</td>
<td>-12.7</td>
<td>-3.6</td>
<td>2010</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2010-01-02</td>
<td>-3.6</td>
<td>-7.4</td>
<td>0.2</td>
<td>2010</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2010-01-03</td>
<td>-6.8</td>
<td>-10.5</td>
<td>-3.2</td>
<td>2010</td>
<td>1</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2010-01-04</td>
<td>-5.9</td>
<td>-8.0</td>
<td>-3.4</td>
<td>2010</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2010-01-05</td>
<td>-9.9</td>
<td>-12.3</td>
<td>-7.0</td>
<td>2010</td>
<td>1</td>
<td>5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="feacc9b1" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 필터링</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>conditions <span class="op">=</span> (seoul[<span class="st">'날짜'</span>].dt.month<span class="op">==</span><span class="dv">8</span>) <span class="op">&amp;</span> (seoul[<span class="st">'날짜'</span>].dt.day<span class="op">==</span><span class="dv">15</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>seoul0815 <span class="op">=</span> seoul[conditions]</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>seoul0815</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">날짜</th>
<th data-quarto-table-cell-role="th">평균기온</th>
<th data-quarto-table-cell-role="th">최저기온</th>
<th data-quarto-table-cell-role="th">최고기온</th>
<th data-quarto-table-cell-role="th">연도</th>
<th data-quarto-table-cell-role="th">월</th>
<th data-quarto-table-cell-role="th">일</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">226</td>
<td>2010-08-15</td>
<td>26.6</td>
<td>24.6</td>
<td>30.2</td>
<td>2010</td>
<td>8</td>
<td>15</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">591</td>
<td>2011-08-15</td>
<td>24.5</td>
<td>22.9</td>
<td>26.9</td>
<td>2011</td>
<td>8</td>
<td>15</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">957</td>
<td>2012-08-15</td>
<td>23.7</td>
<td>22.4</td>
<td>27.1</td>
<td>2012</td>
<td>8</td>
<td>15</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1322</td>
<td>2013-08-15</td>
<td>28.7</td>
<td>25.8</td>
<td>32.4</td>
<td>2013</td>
<td>8</td>
<td>15</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1687</td>
<td>2014-08-15</td>
<td>24.9</td>
<td>20.9</td>
<td>29.6</td>
<td>2014</td>
<td>8</td>
<td>15</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2052</td>
<td>2015-08-15</td>
<td>27.1</td>
<td>23.1</td>
<td>30.8</td>
<td>2015</td>
<td>8</td>
<td>15</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2418</td>
<td>2016-08-15</td>
<td>29.1</td>
<td>25.8</td>
<td>34.0</td>
<td>2016</td>
<td>8</td>
<td>15</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2783</td>
<td>2017-08-15</td>
<td>21.9</td>
<td>20.8</td>
<td>24.0</td>
<td>2017</td>
<td>8</td>
<td>15</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3148</td>
<td>2018-08-15</td>
<td>31.7</td>
<td>28.3</td>
<td>38.0</td>
<td>2018</td>
<td>8</td>
<td>15</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3513</td>
<td>2019-08-15</td>
<td>25.9</td>
<td>23.9</td>
<td>28.6</td>
<td>2019</td>
<td>8</td>
<td>15</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3879</td>
<td>2020-08-15</td>
<td>26.1</td>
<td>25.0</td>
<td>27.0</td>
<td>2020</td>
<td>8</td>
<td>15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="a08b809a" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>seoul0815.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 11 entries, 226 to 3879
Data columns (total 7 columns):
 #   Column  Non-Null Count  Dtype         
---  ------  --------------  -----         
 0   날짜      11 non-null     datetime64[ns]
 1   평균기온    11 non-null     float64       
 2   최저기온    11 non-null     float64       
 3   최고기온    11 non-null     float64       
 4   연도      11 non-null     int32         
 5   월       11 non-null     int32         
 6   일       11 non-null     int32         
dtypes: datetime64[ns](1), float64(3), int32(3)
memory usage: 572.0 bytes</code></pre>
</div>
</div>
<div id="2d3e95cd" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 결측값 확인</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>seoul0815.isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>날짜      0
평균기온    0
최저기온    0
최고기온    0
연도      0
월       0
일       0
dtype: int64</code></pre>
</div>
</div>
<div id="8ef15a83" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 연도에 따른 평균기온 변화</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">3</span>))</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> seoul0815[[<span class="st">'연도'</span>]]</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> seoul0815[<span class="st">'평균기온'</span>]</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'연도'</span>)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'평균기온'</span>)</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>plt.scatter(X, Y)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-41-output-1.png" width="441" height="292" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="41a40107" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># jointplot 그리기</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>sns.jointplot(x<span class="op">=</span><span class="st">'연도'</span>, y <span class="op">=</span><span class="st">'평균기온'</span>, kind<span class="op">=</span><span class="st">'reg'</span>, data<span class="op">=</span>seoul0815)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-42-output-1.png" width="556" height="559" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="11055d7f" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 단순선형 회귀분석 : 2022년 8월 15일 기온 예측</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LinearRegression()</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> seoul0815[[<span class="st">'연도'</span>]]</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> seoul0815[<span class="st">'평균기온'</span>]</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>model.fit(X, Y)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>future <span class="op">=</span> pd.DataFrame({<span class="st">'연도'</span>: [<span class="dv">2022</span>]})</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> model.predict(future)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[27.50818182]</code></pre>
</div>
</div>
<p><br></p>
<ul>
<li>fit() 메서드는 선형 회귀 모델에 필요한 두 가지 변수를 전달
<ul>
<li>기울기: line_fitter.coef_</li>
<li>절편: line_fitter.intercept_</li>
<li>이렇게 하면 새로운 X 값을 넣어 y값을 예측할 수 있게 됨</li>
<li>싸이킷런 단순 선형회귀에서는 최소제곱법(Ordinary Least Squares)을 활용하기 때문</li>
</ul></li>
</ul>
<p><br></p>
<div id="0ea19d55" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>seoul0815.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 11 entries, 226 to 3879
Data columns (total 7 columns):
 #   Column  Non-Null Count  Dtype         
---  ------  --------------  -----         
 0   날짜      11 non-null     datetime64[ns]
 1   평균기온    11 non-null     float64       
 2   최저기온    11 non-null     float64       
 3   최고기온    11 non-null     float64       
 4   연도      11 non-null     int32         
 5   월       11 non-null     int32         
 6   일       11 non-null     int32         
dtypes: datetime64[ns](1), float64(3), int32(3)
memory usage: 572.0 bytes</code></pre>
</div>
</div>
<div id="b58609aa" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 8월 15일 평균기온을 산점도, 회귀선 출력하기</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>x<span class="op">=</span>seoul0815[<span class="st">'연도'</span>]</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span>seoul0815[<span class="st">'평균기온'</span>]</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>fp1 <span class="op">=</span> np.polyfit(x, y,<span class="dv">2</span>)</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>f1 <span class="op">=</span> np.poly1d(fp1)</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>fx <span class="op">=</span> np.linspace(<span class="dv">2010</span>, <span class="dv">2020</span>)</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">3</span>))</span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,y)</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>plt.plot(fx, f1(fx), ls<span class="op">=</span><span class="st">'dashed'</span>, lw<span class="op">=</span><span class="dv">3</span>, color<span class="op">=</span><span class="st">'g'</span>)</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'연도'</span>)</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'평균기온'</span>)</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-45-output-1.png" width="441" height="292" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="a7405edc" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>fp1</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>f1</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>fx</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>array([2010.        , 2010.20408163, 2010.40816327, 2010.6122449 ,
       2010.81632653, 2011.02040816, 2011.2244898 , 2011.42857143,
       2011.63265306, 2011.83673469, 2012.04081633, 2012.24489796,
       2012.44897959, 2012.65306122, 2012.85714286, 2013.06122449,
       2013.26530612, 2013.46938776, 2013.67346939, 2013.87755102,
       2014.08163265, 2014.28571429, 2014.48979592, 2014.69387755,
       2014.89795918, 2015.10204082, 2015.30612245, 2015.51020408,
       2015.71428571, 2015.91836735, 2016.12244898, 2016.32653061,
       2016.53061224, 2016.73469388, 2016.93877551, 2017.14285714,
       2017.34693878, 2017.55102041, 2017.75510204, 2017.95918367,
       2018.16326531, 2018.36734694, 2018.57142857, 2018.7755102 ,
       2018.97959184, 2019.18367347, 2019.3877551 , 2019.59183673,
       2019.79591837, 2020.        ])</code></pre>
</div>
</div>
<div id="7190b5f5" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 시본 모듈로 추세선 넣기</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">3</span>))   </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>sns.regplot(x<span class="op">=</span><span class="st">'연도'</span>, y<span class="op">=</span><span class="st">'평균기온'</span>, data<span class="op">=</span>seoul0815) </span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-47-output-1.png" width="441" height="292" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="1aaabbf5" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>sns.jointplot(x<span class="op">=</span><span class="st">'연도'</span>, y<span class="op">=</span><span class="st">'평균기온'</span>, data<span class="op">=</span>seoul0815, kind<span class="op">=</span><span class="st">'reg'</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-48-output-1.png" width="556" height="559" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="184d6ace" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>sns.pairplot(seoul0815, kind<span class="op">=</span><span class="st">'reg'</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-49-output-1.png" width="1412" height="1412" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
</section>
<section id="다중선형-회귀분석" class="level3">
<h3 class="anchored" data-anchor-id="다중선형-회귀분석">8.2.2. 다중선형 회귀분석</h3>
<p><br></p>
<div id="b8f2cd0b" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>seoul.info()</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>seoul.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 4017 entries, 0 to 4017
Data columns (total 7 columns):
 #   Column  Non-Null Count  Dtype         
---  ------  --------------  -----         
 0   날짜      4017 non-null   datetime64[ns]
 1   평균기온    4017 non-null   float64       
 2   최저기온    4017 non-null   float64       
 3   최고기온    4017 non-null   float64       
 4   연도      4017 non-null   int32         
 5   월       4017 non-null   int32         
 6   일       4017 non-null   int32         
dtypes: datetime64[ns](1), float64(3), int32(3)
memory usage: 204.0 KB</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">날짜</th>
<th data-quarto-table-cell-role="th">평균기온</th>
<th data-quarto-table-cell-role="th">최저기온</th>
<th data-quarto-table-cell-role="th">최고기온</th>
<th data-quarto-table-cell-role="th">연도</th>
<th data-quarto-table-cell-role="th">월</th>
<th data-quarto-table-cell-role="th">일</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2010-01-01</td>
<td>-7.6</td>
<td>-12.7</td>
<td>-3.6</td>
<td>2010</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2010-01-02</td>
<td>-3.6</td>
<td>-7.4</td>
<td>0.2</td>
<td>2010</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2010-01-03</td>
<td>-6.8</td>
<td>-10.5</td>
<td>-3.2</td>
<td>2010</td>
<td>1</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2010-01-04</td>
<td>-5.9</td>
<td>-8.0</td>
<td>-3.4</td>
<td>2010</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2010-01-05</td>
<td>-9.9</td>
<td>-12.3</td>
<td>-7.0</td>
<td>2010</td>
<td>1</td>
<td>5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="7a3bc93e" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LinearRegression()</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> seoul0815[[<span class="st">'연도'</span>,<span class="st">'최저기온'</span>,<span class="st">'최고기온'</span>]]</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> seoul0815[<span class="st">'평균기온'</span>]</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>model.fit(X, Y)</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>new_data <span class="op">=</span> pd.DataFrame({<span class="st">'연도'</span>: [<span class="dv">2022</span>], <span class="st">'최저기온'</span>: [<span class="dv">24</span>], <span class="st">'최고기온'</span>: [<span class="dv">33</span>]})</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> model.predict(new_data)</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[28.08381871]</code></pre>
</div>
</div>
<div id="6289c2a1" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 준비 : 속성(변수) 2가지 선택</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> seoul[[<span class="st">'연도'</span>,<span class="st">'최저기온'</span>,<span class="st">'최고기온'</span>]]</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>Y <span class="op">=</span> seoul[<span class="st">'평균기온'</span>]</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 먼저 X와 Y변수를 받아 사이킷런의 train_test_split함수를 통해 7:3의 비율로 데이터를 분할한다.</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>x_train, x_test, y_train, y_test <span class="op">=</span> train_test_split(X,Y, train_size <span class="op">=</span> <span class="fl">0.7</span>, test_size <span class="op">=</span> <span class="fl">0.3</span>)</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a><span class="co">#다중 선형 회귀 모델 생성</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LinearRegression()</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>model.fit(x_train, y_train)</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 모델 테스트하기 : test셋의 일부 데이터를 가지고 모델의 예측결과가 얼마나 좋게 나타나는지 확인</span></span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>plt.plot(model.predict(x_test[:<span class="dv">50</span>]), label<span class="op">=</span><span class="st">'predict'</span>)</span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>plt.plot(y_test[:<span class="dv">50</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>), label<span class="op">=</span><span class="st">'real temp'</span>)</span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-52-output-1.png" width="798" height="269" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="e8b5dfd0" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 전체 데이터를 이용해 값을 예측하고 실제 값과 비교하여 산점도 그리기</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">3</span>))</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>y_predict <span class="op">=</span> model.predict(x_test)</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(y_test, y_predict, alpha <span class="op">=</span> <span class="fl">0.4</span>)</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="3_2_regression_files/figure-html/cell-53-output-1.png" width="798" height="269" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="1cfde91f" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># score 메소드를 통해 다중선형회귀 모델의 성능을 측정</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model.score(x_train,y_train))</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 결정계수 R²의 최댓값은 1이며 이 수치가 클수록 실제값과 예측값이 유사함을 의미한다.</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 우리가 모델링한 다중선형회귀모델은 약 0.99의 결정계수를 가지며 </span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 이는 X변수들이 y변수에 미치는 영향이 99%로 X변수들이 평균기온값 변동의 99%를 설명할 수 있다는 뜻임</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.9977654933843609</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>